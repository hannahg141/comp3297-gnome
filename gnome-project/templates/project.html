{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="{% static 'css/template.css' %}">
        <title>Project Details: {{ project }}</title>
        <div class="page-header">
            <h1 style="text-align: center;"><img width="144" src="{% static 'backtrack.svg' %}" alt="Backtrack"/></h1>
        </div>
        <h2>Project Details: {{ project }}</h2>
        <style></style>
    </head>
    <body>
    <!--Completed sprints-->
        <p> Completed Sprint Backlogs
            <button type="button"
                    id="showHideButton"
                    onclick="showHide()"
                    class="btn btn-default">
                Show
            </button>
        </p>
        <script>
        function showHide() {
            if (document.getElementById("showHideButton").innerHTML == "Show") {
                document.getElementById("showHideButton").innerHTML = "Hide";
                document.getElementById("completedSprints").style.display = "block";
            }
            else {
                document.getElementById("showHideButton").innerHTML = "Show";
                document.getElementById("completedSprints").style.display = "none";
            }
        }
        </script>
        <div id="completedSprints" style="display: none;">
        <!-- Completed sprints code-->
            <ul> {% for sprint in sprint_list_done %}
                <li>
                    Sprint {{ sprint.name }} Backlog
                </li>
                <br>
                <table>
                    <tr>
                        <th>Sprint Backlog Item Name</th>
                        <th>Description</th>
                        <th>Tasks Not Yet Started</th>
                        <th>Tasks In Progress</th>
                        <th>Tasks Completed</th>
                    </tr>
                    {% for pbi in sprint.pbiList %}
                    <tr>
                        <td> {{ pbi.name }} </td>
                        <td> {{ pbi.description }} </td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    {% endfor %}
                </table>
                {% endfor %}
            </ul>
        </div>

    <hr>

        <!-- Current Sprint-->
        <p> {% if sprint_current == None %}
            <form action="{{project.id}}/{{product_backlog.id}}/create-new-sprint">
                <button type="submit"
                        class="btn btn-default btn-lg">
                    Create New Sprint
                </button>
            </form>
            {% else %}

            Current Sprint Backlog {{ sprint_current.name }}
        <table>
            <tr>
                <th>Sprint Backlog Item Name</th>
                <th>Description</th>
                <th>Tasks Not Yet Started</th>
                <th>Tasks In Progress</th>
                <th>Tasks Completed</th>
            </tr>
            {% for pbi in sprint_current.pbiList %}
            <tr>
                <td> {{ pbi.name }}
                    <form action="{{project.id}}/{{sprint_current.id}}/{{pbi.id}}/create-new-task">
                         <button type="submit"
                                class="btn btn-default">
                         Add Task
                         </button>
                    </form>
                </td>
                <td> {{ pbi.description }} </td>
                <td>
                    {% for not_yet_started in pbi.tasks_not_yet_started %}
                     <form action="product-backlog/{{pbi.id}}/{{not_yet_started.id}}">
                        <button type="submit"
                                class="btn btn-default">
                            {{ not_yet_started.name }}
                        </button>
                     </form>
                    {% endfor %}
                </td>

                 <td>
                    {% for in_progress in pbi.tasks_in_progress %}
                     <form action="product-backlog/{{pbi.id}}/{{not_yet_started.id}}">
                        <button type="submit"
                                class="btn btn-default">
                            {{ in_progress.name }}
                        </button>
                    </form>
                    {% endfor %}
                </td>

                <td>
                    {% for complete in pbi.tasks_complete %}
                    <form action="product-backlog/{{pbi.id}}/{{not_yet_started.id}}">
                        <button type="submit"
                                class="btn btn-default">
                            {{ complete.name }}
                        </button>
                    </form>
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </table>

            {% endif%}
        </p>


    <hr>

    <!-- Product Backlog-->
      <p> Product Backlog
          <form action="{{project.id}}/{{product_backlog.id}}/create-new-pbi">
           <button type="submit"
                    class="btn btn-default">
                Add Product Backlog Item
            </button>
        </form>
      </p>

      <table>
            <tr>
                <th>Product Backlog Item Name</th>
                <th>Description</th>
                <th>Story Points</th>
                <th>Status</th>
            </tr>
            {% for pbi in product_backlog.pbiList %}
            <tr>
                <td> {{ pbi.name }}
                    <form action="product-backlog/pbi/{{pbi.id}}">
                        <button type="submit"
                                class="btn btn-default">
                            edit
                        </button>
                    </form>
                    <form action="product-backlog/pbi/delete-{{pbi.id}}">
                        <button type="submit"
                                class="btn btn-default">
                            delete
                        </button>
                    </form>
                </td>
                <td> {{ pbi.description }} </td>
                <td> {{ pbi.pointEstimate }} </td>
                <td> {{ pbi.status }} </td>
            </tr>
            {% endfor %}
    </table>
    </body>
</html>
